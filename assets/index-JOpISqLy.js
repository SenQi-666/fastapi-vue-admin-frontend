import{P as M}from"./PageHeader-2LC38_J2.js";import{S as T,a as x,r as q,m as W,u as N,_ as R,o as b,c as w,b as a,e as F,w as t,F as j,f as r,g as d,t as O,j as S,l as A}from"./index-eT2Bus_L.js";const H={name:"Log",components:{PageHeader:M,SearchOutlined:T},setup(){const B=[{title:"序号",dataIndex:"index",align:"center",width:80},{title:"请求地址",dataIndex:"request_path",align:"center"},{title:"请求方法",dataIndex:"request_method",align:"center"},{title:"IP地址",dataIndex:"request_ip",align:"center"},{title:"浏览器",dataIndex:"request_browser",align:"center"},{title:"系统",dataIndex:"request_os",align:"center"},{title:"响应码",dataIndex:"response_code",align:"center"},{title:"返回信息",dataIndex:"response_json",align:"center",width:400,ellipsis:!0},{title:"操作",dataIndex:"operation",align:"center",fixed:"right",width:100}],n=x([{created_at:"2024-02-07 17:27:50",updated_at:"2024-02-07 17:27:50",id:368,description:null,creator:{id:1,name:"森七"},request_path:"/api/system/role/list",request_method:"GET",request_payload:"",request_ip:"127.0.0.1",request_os:"Windows 10",request_browser:"Chrome 121.0.0",response_code:200,response_json:'{"code":200,"total":4,"page":1,"page_size":10,"has_next":false,"data":[{"created_at":"2024-01-11 16:28:05","updated_at":"2024-01-11 16:53:05","id":1,"description":null,"creator":{"id":1,"name":"森七"},"name":"管理员","order":1,"available":true},{"created_at":"2024-01-18 10:57:48","updated_at":"2024-01-18 10:57:50","id":2,"description":null,"creator":{"id":1,"name":"森七"},"name":"董事长","order":2,"available":true},{"created_at":"2024-01-18 10:59:01","updated_at":"2024-01-18 10:59:03","id":3,"description":null,"creator":{"id":1,"name":"森七"},"name":"运营主管","order":3,"available":true},{"created_at":"2024-01-18 10:59:42","updated_at":"2024-01-18 10:59:44","id":4,"description":null,"creator":{"id":1,"name":"森七"},"name":"运营人员","order":4,"available":true}],"message":"success"}'},{created_at:"2024-02-07 17:24:50",updated_at:"2024-02-07 17:24:50",id:367,description:null,creator:{id:1,name:"森七"},request_path:"/api/system/auth/login",request_method:"POST",request_payload:"{}",request_ip:"127.0.0.1",request_os:"Windows 10",request_browser:"Chrome 121.0.0",response_code:200,response_json:'{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZW5xaSIsImlzX3JlZnJlc2giOmZhbHNlLCJleHAiOjE3MDc3Mjk4OTB9.Znp_JOwoz8fnlMQkoWd97EYH3X5yNV40tkftnlZSGtM","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZW5xaSIsImlzX3JlZnJlc2giOnRydWUsImV4cCI6MTcwNzkwMjY5MH0.GCjlRt5Q3zJdzOVALTuHS0g7Qy7Zd4sDlhzrsr29nbk","token_type":"Bearer","expires_in":432000}'},{created_at:"2024-02-07 16:42:32",updated_at:"2024-02-07 16:42:32",id:366,description:null,creator:{id:1,name:"森七"},request_path:"/api/system/auth/login",request_method:"POST",request_payload:"{}",request_ip:"127.0.0.1",request_os:"Windows 10",request_browser:"Chrome 121.0.0",response_code:200,response_json:'{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZW5xaSIsImlzX3JlZnJlc2giOmZhbHNlLCJleHAiOjE3MDc3MjczNTJ9.zYIt_b9Htb67P1TLRAI-u8c2rW6a2QjFz-Qp7icLFCY","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZW5xaSIsImlzX3JlZnJlc2giOnRydWUsImV4cCI6MTcwNzkwMDE1Mn0.Iiv0c-TtGkL2vdgLuZ3MnJJ7G3JWSGxK3xSR-SN9-7o","token_type":"Bearer","expires_in":432000}'}]),D=q(!1),e=x({}),v=q(!1),p=x({name:"",available:"true"}),k=[{title:"序号",dataIndex:"index",align:"center",width:80},{title:"姓名",dataIndex:"name",align:"center"},{title:"状态",dataIndex:"available",align:"center"}],f=x([{created_at:"2024-01-12 09:09:03",updated_at:"2024-01-30 13:13:06",id:1,description:null,username:"senqi",name:"森七",mobile:"17777777777",email:"superadmin@example.com",gender:1,is_superuser:!0,dept_id:1,available:!0},{created_at:"2024-01-12 13:27:53",updated_at:"2024-01-17 16:07:59",id:2,description:null,username:"test",name:"测试",mobile:"17777777777",email:"test@example.com",gender:2,is_superuser:!1,dept_id:3,available:!0}]);for(var u=100;u>2;u--)f.push({created_at:"2024-01-12 13:27:53",updated_at:"2024-01-17 16:07:59",id:u,description:null,username:"test",name:"测试",mobile:"17777777777",email:"test@example.com",gender:2,is_superuser:!1,dept_id:3,available:!0});const c=l=>{console.log("Received values of form: ",l),console.log("formState: ",e)},J=l=>{console.log("Received values of form: ",l),console.log("creatorFormState: ",p)},y=()=>{Object.keys(p).forEach(l=>{delete p[l]}),p.available="true",console.log(e)},E=()=>{Object.keys(e).forEach(l=>{delete e[l]}),console.log(e),_.value=[],m=void 0},h=()=>{delete e.creator,delete e.creator_name,_.value=[],m=void 0,v.value=!1},s=x({defaultPageSize:10,total:n.length,showTotal:(l,i)=>`第 ${i[0]}-${i[1]} 条 / 总共 ${l} 条`}),I=x({defaultPageSize:10,total:f.length,showTotal:(l,i)=>`第 ${i[0]}-${i[1]} 条 / 总共 ${l} 条`}),g=l=>{console.log(l)},C=()=>{!_.value.length||!m||(e.creator=_.value[0],e.creator_name=m.name,v.value=!1)},_=q([]);let m;const z=(l,i)=>{console.log(`selectingRowKeys: ${l}`,"selectingRows: ",i),_.value=l,m=i[0]},o=W(()=>({selectedRowKeys:N(_),onChange:z,hideDefaultSelections:!0,type:"radio"}));return{columns:B,dataSource:n,formState:e,onFinish:c,expand:D,resetFields:E,pagination:s,handleTableChange:g,showCreatorModal:v,creatorHandle:C,clearCreator:h,creatorFormState:p,resetCreatorForm:y,userDataSource:f,userColumns:k,userPagination:I,creatorFormOnFinish:J,rowSelection:o}}},Z={class:"table-search-wrapper"},U={class:"table-wrapper"},V={key:0},G={class:"table-search-wrapper"},P={class:"table-wrapper"},X={key:0},L={key:1};function Y(B,n,D,e,v,p){const k=r("page-header"),f=r("a-input"),u=r("a-form-item"),c=r("a-col"),J=r("search-outlined"),y=r("a-select"),E=r("a-range-picker"),h=r("a-row"),s=r("a-button"),I=r("a-form"),g=r("a-card"),C=r("a-table"),_=r("a-select-option"),m=r("a-badge"),z=r("a-modal");return b(),w(j,null,[a(k),F("div",Z,[a(g,{bordered:!1},{default:t(()=>[a(I,{model:e.formState,onFinish:e.onFinish},{default:t(()=>[a(h,null,{default:t(()=>[a(c,{flex:"0 1 500px"},{default:t(()=>[a(u,{name:"request_path",label:"请求路径",style:{"max-width":"300px"}},{default:t(()=>[a(f,{value:e.formState.request_path,"onUpdate:value":n[0]||(n[0]=o=>e.formState.request_path=o),placeholder:"请输入请求路径",allowClear:""},null,8,["value"])]),_:1})]),_:1}),a(c,{flex:"0 1 500px"},{default:t(()=>[a(u,{name:"creator",label:"创建人",style:{"max-width":"300px"}},{default:t(()=>[a(y,{value:e.formState.creator_name,"onUpdate:value":n[1]||(n[1]=o=>e.formState.creator_name=o),placeholder:"请选择创建人",open:!1,onClick:n[2]||(n[2]=o=>e.showCreatorModal=!0)},{suffixIcon:t(()=>[a(J)]),_:1},8,["value"])]),_:1})]),_:1}),a(c,{flex:"0 1 500px"},{default:t(()=>[a(u,{name:"date-range-picker",label:"创建日期",style:{"max-width":"350px"}},{default:t(()=>[a(E,{value:e.formState.date_range,"onUpdate:value":n[3]||(n[3]=o=>e.formState.date_range=o),"value-format":"YYYY-MM-DD"},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(h,null,{default:t(()=>[a(c,null,{default:t(()=>[a(s,{type:"primary","html-type":"submit"},{default:t(()=>[d("查询")]),_:1}),a(s,{style:{margin:"0 8px"},onClick:e.resetFields},{default:t(()=>[d("重置")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["model","onFinish"])]),_:1})]),F("div",U,[a(g,{title:"日志列表",bordered:!1,headStyle:{borderBottom:"none",padding:"20px 24px"},bodyStyle:{padding:"0 24px",minHeight:"calc(100vh - 400px)"}},{default:t(()=>[a(C,{rowKey:o=>o.id,columns:e.columns,"data-source":e.dataSource,onChange:e.handleTableChange,scroll:{x:500,y:"calc(100vh - 500px)"},pagination:e.pagination,style:{minHeight:"500px"}},{bodyCell:t(({column:o,index:l})=>[o.dataIndex==="index"?(b(),w("span",V,O(l+1),1)):S("",!0),o.dataIndex==="operation"?(b(),A(s,{key:1,type:"link"},{default:t(()=>[d("修改")]),_:1})):S("",!0)]),_:1},8,["rowKey","columns","data-source","onChange","scroll","pagination"])]),_:1},8,["bodyStyle"])]),a(z,{title:"选择创建人",open:e.showCreatorModal,"onUpdate:open":n[7]||(n[7]=o=>e.showCreatorModal=o),onOk:e.creatorHandle,centered:!0,width:"1200px"},{footer:t(()=>[a(s,{onClick:n[4]||(n[4]=o=>e.showCreatorModal=!1)},{default:t(()=>[d("取消")]),_:1}),a(s,{onClick:e.clearCreator},{default:t(()=>[d("清空")]),_:1},8,["onClick"]),a(s,{type:"primary",onClick:e.creatorHandle},{default:t(()=>[d("确定")]),_:1},8,["onClick"])]),default:t(()=>[F("div",G,[a(g,{bordered:!0},{default:t(()=>[a(I,{model:e.creatorFormState,onFinish:e.creatorFormOnFinish},{default:t(()=>[a(h,null,{default:t(()=>[a(c,{flex:"0 1 400px"},{default:t(()=>[a(u,{name:"creator_name",label:"姓名",style:{"max-width":"300px"}},{default:t(()=>[a(f,{value:e.creatorFormState.name,"onUpdate:value":n[5]||(n[5]=o=>e.creatorFormState.name=o),placeholder:"请输入姓名",allowClear:""},null,8,["value"])]),_:1})]),_:1}),a(c,{flex:"0 1 400px"},{default:t(()=>[a(u,{name:"available",label:"状态",style:{"max-width":"300px"}},{default:t(()=>[a(y,{value:e.creatorFormState.available,"onUpdate:value":n[6]||(n[6]=o=>e.creatorFormState.available=o),placeholder:"全部",allowClear:""},{default:t(()=>[a(_,{value:"true"},{default:t(()=>[d("启用")]),_:1}),a(_,{value:"false"},{default:t(()=>[d("停用")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),a(h,null,{default:t(()=>[a(c,null,{default:t(()=>[a(s,{type:"primary","html-type":"submit"},{default:t(()=>[d("查询")]),_:1}),a(s,{style:{margin:"0 8px"},onClick:e.resetCreatorForm},{default:t(()=>[d("重置")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["model","onFinish"])]),_:1})]),F("div",P,[a(g,{title:"用户列表",bordered:!0,headStyle:{borderBottom:"none",padding:"20px 24px"},bodyStyle:{padding:"0 24px"}},{default:t(()=>[a(C,{rowKey:o=>o.id,columns:e.userColumns,"data-source":e.userDataSource,"row-selection":e.rowSelection,onChange:e.handleTableChange,scroll:{x:500,y:"calc(100vh - 500px)"},pagination:e.userPagination},{bodyCell:t(({column:o,record:l,index:i})=>[o.dataIndex==="index"?(b(),w("span",X,O(i+1),1)):S("",!0),o.dataIndex==="available"?(b(),w("span",L,[a(m,{color:l.available?"green":"red"},null,8,["color"]),d(" "+O(l.available?"启用":"禁用"),1)])):S("",!0)]),_:1},8,["rowKey","columns","data-source","row-selection","onChange","scroll","pagination"])]),_:1})])]),_:1},8,["open","onOk"])],64)}const $=R(H,[["render",Y],["__scopeId","data-v-1fe86472"]]);export{$ as default};
